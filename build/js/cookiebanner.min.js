/*
 *  cookiebannerjs - v0.2.4
 *  2022-04-05
 *
 *  https://github.com/interpromotion/cookiebannerjs
 */

/*
 *  Copyright (C) 2022 Interpromotion <info@interpromotion.com>
 *
 *  This file is part of Cookiebannerjs.
 *
 *  Cookiebannerjs is free software: you can redistribute it and/or modify
 *  it under the terms of the GNU Affero General Public License as
 *  published by the Free Software Foundation, either version 3 of the
 *  License, or (at your option) any later version.
 *
 *  Cookiebannerjs is distributed in the hope that it will be useful,
 *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *  GNU Affero General Public License for more details.
 *
 *  You should have received a copy of the GNU Affero General Public License
 *  along with this program.  If not, see <http://www.gnu.org/licenses/>
 */


!function(t,o,e){"use strict";"function"==typeof define&&define.amd?define(t):o.CookieBanner=t()}(function(){"use strict";var k={getCookie:function(t){var o=("; "+document.cookie).split("; "+t+"=");return 2!=o.length?void 0:JSON.parse(o.pop().split(";").shift())},setCookie:function(t,o,e,i,s){var n=new Date;n.setDate(n.getDate()+(e||365));var p=[t+"="+JSON.stringify(o),"expires="+n.toUTCString(),"path="+(s||"/")];i&&p.push("domain="+i),document.cookie=p.join(";")},isCookieSet:function(t){return void 0!==this.getCookie(t)}};function t(t){(self=this).banner=null;this.popup=null;for(var o in this.options=function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e]);return t}({policyText:"",policyUrl:"",policyUrlText:"",popupTitle:"",popupDescription:"",allowText:"Allow cookie",customizeText:"Customize settings",denyText:"Deny cookie",acceptSelected:"Accept selected only cookie",acceptAll:"Accept all cookie",cookieCatDetailsText:"Details",categories:{necessary:{title:"Technical cookie",description:"These cookies are essential for the correct functioning of the website and to provide the service offered and requested by a user. User consent is not needed to use these type of cookies.",consent:!0,blocked:!0}},cookieName:"cookie_allowed",bannerClass:"intP_cookie-banner",bannerHiddenClass:"intP_cookie-banner__close",policyTextClass:"intP_cookie-banner_policy-text",buttonsContainerClass:"intP_cookie-banner_buttons",allowButtonClass:"intP_cookie-banner_allow",customizeButtonClass:"intP_cookie-banner_customize",denyButtonClass:"intP_cookie-banner_deny",closingAnimationDuration:500,popupClass:"intP_cookie-popup",descriptionPopupClass:"intP_cookie-popup_description",titleDescriptionPopupClass:"intP_cookie-popup_description_title",cookieListPopupClass:"intP_cookie-popup_list",cookieCatPopupClass:"intP_cookie-popup_list_coockie-cat",cookieCatHeaderPopupClass:"intP_cookie-popup_list_coockie-cat_header",cookieTitleCatHeaderPopupClass:"intP_cookie-popup_list_coockie-cat_header_title",cookieDetailsCatHeaderPopupClass:"intP_cookie-popup_list_coockie-cat_header_details",cookieConsentCatHeaderPopupClass:"intP_cookie-popup_list_coockie-cat_header_consent",cookieContentCatPopupClass:"intP_cookie-popup_list_coockie-cat_content",cookieButtonsPopupClass:"intP_cookie-popup_buttons",cookieAcceptSelectedButtonPopupClass:"intP_cookie-popup_buttons_accept-selected",cookieAcceptAllButtonPopupClass:"intP_cookie-popup_buttons_accept-all",closeButtonPopupClass:"intP_cookie-popup_close-btn",onInitialized:function(){},onStatusChanged:function(t){}},t),this.options.consents={},this.options.categories)this.options.consents[o]=this.options.categories[o].consent;k.isCookieSet(this.options.cookieName)||this._draw(),this.options.onInitialized()}return t.prototype._draw=function(){this.banner=document.createElement("div"),this.banner.classList.add(this.options.bannerClass);var t=document.createElement("p");t.classList.add(this.options.policyTextClass);var o="";o=0<=this.options.policyText.indexOf("{{policy_url}}")?this.options.policyText.replace("{{policy_url}}",'<a href="'+this.options.policyUrl+'">'+this.options.policyUrlText+"</a>"):this.options.policyText+("."==this.options.policyText.charAt(this.options.policyText.length-1)?" ":". ")+'<a href="'+this.options.policyUrl+'">'+this.options.policyUrlText+"</a>",t.innerHTML=o,this.banner.appendChild(t);var e=document.createElement("div");e.classList.add(this.options.buttonsContainerClass),this.banner.appendChild(e),this.allowButton=document.createElement("button"),this.allowButton.classList.add(this.options.allowButtonClass),this.allowButton.setAttribute("type","button"),this.allowButton.innerHTML=this.options.allowText,this.allowButton.addEventListener("click",this.allow),e.appendChild(this.allowButton),this.customizeButton=document.createElement("button"),this.customizeButton.classList.add(this.options.customizeButtonClass),this.customizeButton.setAttribute("type","button"),this.customizeButton.innerHTML=this.options.customizeText,this.customizeButton.addEventListener("click",this.customize),e.appendChild(this.customizeButton),this.denyButton=document.createElement("button"),this.denyButton.classList.add(this.options.denyButtonClass),this.denyButton.setAttribute("type","button"),this.denyButton.innerHTML=this.options.denyText,this.denyButton.addEventListener("click",this.deny),e.appendChild(this.denyButton),document.body.appendChild(this.banner)},t.prototype._draw_popup=function(){if(null!==document.querySelector("."+this.options.bannerClass)&&this.banner.remove(),null!==document.querySelector("."+this.options.popupClass)&&document.querySelector("."+this.options.popupClass).remove(),this.popup=document.createElement("div"),this.popup.classList.add(this.options.popupClass),""!==this.options.popupTitle||""!==this.options.popupDescription){var t=document.createElement("div");if(t.classList.add(this.options.descriptionPopupClass),""!==this.options.popupTitle){var o=document.createElement("h3");o.classList.add(this.options.titleDescriptionPopupClass),o.innerText=this.options.popupTitle,t.appendChild(o)}if(""!==this.options.popupDescription){var e=document.createElement("p"),i="";i=0<=this.options.popupDescription.indexOf("{{policy_url}}")?this.options.popupDescription.replace("{{policy_url}}",'<a href="'+this.options.policyUrl+'">'+this.options.policyUrlText+"</a>"):this.options.popupDescription+("."==this.options.popupDescription.charAt(this.options.popupDescription.length-1)?" ":". ")+'<a href="'+this.options.policyUrl+'">'+this.options.policyUrlText+"</a>",e.innerHTML=i,t.appendChild(e)}this.popup.appendChild(t)}var s=document.createElement("div");for(var n in s.classList.add(this.options.cookieListPopupClass),this.options.categories){var p=document.createElement("div");p.classList.add(this.options.cookieCatPopupClass);var c=document.createElement("div");c.classList.add(this.options.cookieCatHeaderPopupClass),c.innerHTML='<h3 class="'+this.options.cookieTitleCatHeaderPopupClass+'">'+this.options.categories[n].title+"</h3>";var a=document.createElement("button");a.setAttribute("type","button"),a.classList.add(this.options.cookieDetailsCatHeaderPopupClass),a.innerText=this.options.cookieCatDetailsText,a.addEventListener("click",function(){this.parentNode.parentNode.classList.toggle("open")}),c.appendChild(a);var l=document.createElement("button");l.setAttribute("type","button"),l.setAttribute("category",n),k.isCookieSet(this.options.cookieName)?this._hasConsent(n)&&(l.classList.add("active"),this.options.consents[n]=!0):!0===this.options.categories[n].consent&&l.classList.add("active"),!0===this.options.categories[n].blocked&&l.setAttribute("disabled","disabled"),l.classList.add(this.options.cookieConsentCatHeaderPopupClass),l.addEventListener("click",function(){this.classList.toggle("active"),self.options.consents[this.getAttribute("category")]=this.classList.contains("active")}),c.appendChild(l),p.appendChild(c);var u=document.createElement("div");u.classList.add(this.options.cookieContentCatPopupClass),u.innerHTML="<p>"+this.options.categories[n].description+"</p>",p.appendChild(u),s.append(p),this.popup.appendChild(s)}var r=document.createElement("div");r.classList.add(this.options.cookieButtonsPopupClass);var d=document.createElement("button");d.setAttribute("type","button"),d.classList.add(this.options.cookieAcceptSelectedButtonPopupClass),d.innerText=this.options.acceptSelected,d.addEventListener("click",function(){self.setStatus(self.options.consents),self.popup.remove()}),r.appendChild(d);var h=document.createElement("button");h.setAttribute("type","button"),h.classList.add(this.options.cookieAcceptAllButtonPopupClass),h.innerText=this.options.acceptAll,h.addEventListener("click",function(){for(var t in self.options.consents)self.options.consents[t]=!0;self.setStatus(self.options.consents),self.popup.remove()}),r.appendChild(h),this.popup.appendChild(r);var C=document.createElement("button");C.setAttribute("type","button"),C.classList.add(this.options.closeButtonPopupClass),C.innerHTML=this.options.denyText,C.addEventListener("click",function(){self.deny(),self.popup.remove()}),this.popup.appendChild(C),document.body.appendChild(this.popup)},t.prototype.allow=function(){for(var t in self.options.consents)self.options.consents[t]=!0;self.setStatus(self.options.consents)},t.prototype.deny=function(){for(var t in self.options.categories)!0===self.options.categories[t].blocked?self.options.consents[t]=!0:self.options.consents[t]=!1;self.setStatus(self.options.consents)},t.prototype.customize=function(){self.banner.classList.add(self.options.bannerHiddenClass),setTimeout(function(){self._draw_popup()},self.options.closingAnimationDuration)},t.prototype.setStatus=function(t){k.setCookie(self.options.cookieName,t,365,"","/"),this.options.onStatusChanged(t),null!==document.querySelector("."+this.options.bannerClass)&&(this.banner.classList.add(this.options.bannerHiddenClass),setTimeout(function(){self.banner.remove()},this.options.closingAnimationDuration))},t.prototype._hasConsent=function(t){var o=k.getCookie(self.options.cookieName);return void 0!==this.options.categories[t]&&(!0===this.options.categories[t].consent&&!0===this.options.categories[t].blocked||void 0!==o&&!0===o[t])},t.hasConsent=function(t){return self._hasConsent(t)},t.getConsents=function(){return k.getCookie(self.options.cookieName)},t.changeConsents=function(t){this.setStatus(t)},t.showPopup=function(){self._draw_popup()},window.CookieBanner=t,window.CookieBanner},window,document);
/*
 *  cookiebannerjs - v0.2.5
 *  2022-05-02
 *
 *  https://github.com/interpromotion/cookiebannerjs
 */

/*
 *  Copyright (C) 2022 Interpromotion <info@interpromotion.com>
 *
 *  This file is part of Cookiebannerjs.
 *
 *  Cookiebannerjs is free software: you can redistribute it and/or modify
 *  it under the terms of the GNU Affero General Public License as
 *  published by the Free Software Foundation, either version 3 of the
 *  License, or (at your option) any later version.
 *
 *  Cookiebannerjs is distributed in the hope that it will be useful,
 *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *  GNU Affero General Public License for more details.
 *
 *  You should have received a copy of the GNU Affero General Public License
 *  along with this program.  If not, see <http://www.gnu.org/licenses/>
 */
var CookieHelper={getCookie:function(t){t=("; "+document.cookie).split("; "+t+"=");return 2!=t.length?void 0:JSON.parse(t.pop().split(";").shift())},setCookie:function(t,o,e,i,s){var n=new Date,e=(n.setDate(n.getDate()+(e||365)),[t+"="+JSON.stringify(o),"expires="+n.toUTCString(),"path="+(s||"/")]);i&&e.push("domain="+i),document.cookie=e.join(";")},isCookieSet:function(t){return void 0!==this.getCookie(t)}};function extend(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e]);return t}function CookieBanner(t){this.banner=null,this.popup=null;for(var o in this.options=extend({policyText:"",policyUrl:"",policyUrlText:"",popupTitle:"",popupDescription:"",allowText:"Allow cookie",customizeText:"Customize settings",denyText:"Deny cookie",acceptSelected:"Accept selected only cookie",acceptAll:"Accept all cookie",cookieCatDetailsText:"Details",categories:{necessary:{title:"Technical cookie",description:"These cookies are essential for the correct functioning of the website and to provide the service offered and requested by a user. User consent is not needed to use these type of cookies.",consent:!0,blocked:!0}},cookieName:"cookie_allowed",bannerClass:"intP_cookie-banner",bannerHiddenClass:"intP_cookie-banner__close",policyTextClass:"intP_cookie-banner_policy-text",buttonsContainerClass:"intP_cookie-banner_buttons",allowButtonClass:"intP_cookie-banner_allow",customizeButtonClass:"intP_cookie-banner_customize",denyButtonClass:"intP_cookie-banner_deny",closingAnimationDuration:500,popupClass:"intP_cookie-popup",descriptionPopupClass:"intP_cookie-popup_description",titleDescriptionPopupClass:"intP_cookie-popup_description_title",cookieListPopupClass:"intP_cookie-popup_list",cookieCatPopupClass:"intP_cookie-popup_list_coockie-cat",cookieCatHeaderPopupClass:"intP_cookie-popup_list_coockie-cat_header",cookieTitleCatHeaderPopupClass:"intP_cookie-popup_list_coockie-cat_header_title",cookieDetailsCatHeaderPopupClass:"intP_cookie-popup_list_coockie-cat_header_details",cookieConsentCatHeaderPopupClass:"intP_cookie-popup_list_coockie-cat_header_consent",cookieContentCatPopupClass:"intP_cookie-popup_list_coockie-cat_content",cookieButtonsPopupClass:"intP_cookie-popup_buttons",cookieAcceptSelectedButtonPopupClass:"intP_cookie-popup_buttons_accept-selected",cookieAcceptAllButtonPopupClass:"intP_cookie-popup_buttons_accept-all",closeButtonPopupClass:"intP_cookie-popup_close-btn",onInitialized:function(){},onStatusChanged:function(t){}},t),this.options.consents={},this.options.categories)this.options.consents[o]=this.options.categories[o].consent;CookieHelper.isCookieSet(this.options.cookieName)||this._draw(),this.options.onInitialized()}CookieBanner.prototype._draw=function(){this.banner=document.createElement("div"),this.banner.classList.add(this.options.bannerClass);var t=document.createElement("p"),o=(t.classList.add(this.options.policyTextClass),""),o=0<=this.options.policyText.indexOf("{{policy_url}}")?this.options.policyText.replace("{{policy_url}}",'<a href="'+this.options.policyUrl+'">'+this.options.policyUrlText+"</a>"):this.options.policyText+("."==this.options.policyText.charAt(this.options.policyText.length-1)?" ":". ")+'<a href="'+this.options.policyUrl+'">'+this.options.policyUrlText+"</a>",o=(t.innerHTML=o,this.banner.appendChild(t),document.createElement("div"));o.classList.add(this.options.buttonsContainerClass),this.banner.appendChild(o),this.allowButton=document.createElement("button"),this.allowButton.classList.add(this.options.allowButtonClass),this.allowButton.setAttribute("type","button"),this.allowButton.innerHTML=this.options.allowText,this.allowButton.addEventListener("click",this.allow.bind(this)),o.appendChild(this.allowButton),this.customizeButton=document.createElement("button"),this.customizeButton.classList.add(this.options.customizeButtonClass),this.customizeButton.setAttribute("type","button"),this.customizeButton.innerHTML=this.options.customizeText,this.customizeButton.addEventListener("click",this.customize.bind(this)),o.appendChild(this.customizeButton),this.denyButton=document.createElement("button"),this.denyButton.classList.add(this.options.denyButtonClass),this.denyButton.setAttribute("type","button"),this.denyButton.innerHTML=this.options.denyText,this.denyButton.addEventListener("click",this.deny.bind(this)),o.appendChild(this.denyButton),document.body.appendChild(this.banner)},CookieBanner.prototype._draw_popup=function(){null!==document.querySelector("."+this.options.bannerClass)&&this.banner.remove(),null!==document.querySelector("."+this.options.popupClass)&&document.querySelector("."+this.options.popupClass).remove(),this.popup=document.createElement("div"),this.popup.classList.add(this.options.popupClass),""===this.options.popupTitle&&""===this.options.popupDescription||((a=document.createElement("div")).classList.add(this.options.descriptionPopupClass),""!==this.options.popupTitle&&((p=document.createElement("h3")).classList.add(this.options.titleDescriptionPopupClass),p.innerText=this.options.popupTitle,a.appendChild(p)),""!==this.options.popupDescription&&(p=document.createElement("p"),n="",n=0<=this.options.popupDescription.indexOf("{{policy_url}}")?this.options.popupDescription.replace("{{policy_url}}",'<a href="'+this.options.policyUrl+'">'+this.options.policyUrlText+"</a>"):this.options.popupDescription+("."==this.options.popupDescription.charAt(this.options.popupDescription.length-1)?" ":". ")+'<a href="'+this.options.policyUrl+'">'+this.options.policyUrlText+"</a>",p.innerHTML=n,a.appendChild(p)),this.popup.appendChild(a));var t,o=document.createElement("div");for(t in o.classList.add(this.options.cookieListPopupClass),this.options.categories){var e=document.createElement("div"),i=(e.classList.add(this.options.cookieCatPopupClass),document.createElement("div")),s=(i.classList.add(this.options.cookieCatHeaderPopupClass),i.innerHTML='<h3 class="'+this.options.cookieTitleCatHeaderPopupClass+'">'+this.options.categories[t].title+"</h3>",document.createElement("button")),s=(s.setAttribute("type","button"),s.classList.add(this.options.cookieDetailsCatHeaderPopupClass),s.innerText=this.options.cookieCatDetailsText,s.addEventListener("click",t=>{t.target.parentNode.parentNode.classList.toggle("open")}),i.appendChild(s),document.createElement("button")),s=(s.setAttribute("type","button"),s.setAttribute("category",t),CookieHelper.isCookieSet(this.options.cookieName)?this.hasConsent(t)&&(s.classList.add("active"),this.options.consents[t]=!0):!0===this.options.categories[t].consent&&s.classList.add("active"),!0===this.options.categories[t].blocked&&s.setAttribute("disabled","disabled"),s.classList.add(this.options.cookieConsentCatHeaderPopupClass),s.addEventListener("click",t=>{t.target.classList.toggle("active"),this.options.consents[t.target.getAttribute("category")]=t.target.classList.contains("active")}),i.appendChild(s),e.appendChild(i),document.createElement("div"));s.classList.add(this.options.cookieContentCatPopupClass),s.innerHTML="<p>"+this.options.categories[t].description+"</p>",e.appendChild(s),o.append(e),this.popup.appendChild(o)}var n=document.createElement("div"),p=(n.classList.add(this.options.cookieButtonsPopupClass),document.createElement("button")),a=(p.setAttribute("type","button"),p.classList.add(this.options.cookieAcceptSelectedButtonPopupClass),p.innerText=this.options.acceptSelected,p.addEventListener("click",()=>{this.setStatus(this.options.consents),this.popup.remove()}),n.appendChild(p),document.createElement("button")),p=(a.setAttribute("type","button"),a.classList.add(this.options.cookieAcceptAllButtonPopupClass),a.innerText=this.options.acceptAll,a.addEventListener("click",()=>{for(var t in this.options.consents)this.options.consents[t]=!0;this.setStatus(this.options.consents),this.popup.remove()}),n.appendChild(a),this.popup.appendChild(n),document.createElement("button"));p.setAttribute("type","button"),p.classList.add(this.options.closeButtonPopupClass),p.innerHTML=this.options.denyText,p.addEventListener("click",()=>{this.deny(),this.popup.remove()}),this.popup.appendChild(p),document.body.appendChild(this.popup)},CookieBanner.prototype.allow=function(){for(var t in this.options.consents)this.options.consents[t]=!0;this.setStatus(this.options.consents)},CookieBanner.prototype.deny=function(){for(var t in this.options.categories)!0===this.options.categories[t].blocked?this.options.consents[t]=!0:this.options.consents[t]=!1;this.setStatus(this.options.consents)},CookieBanner.prototype.customize=function(){this.banner.classList.add(this.options.bannerHiddenClass),setTimeout(()=>this._draw_popup(),this.options.closingAnimationDuration)},CookieBanner.prototype.setStatus=function(t){CookieHelper.setCookie(this.options.cookieName,t,365,"","/"),this.options.onStatusChanged(t),null!==document.querySelector("."+this.options.bannerClass)&&(this.banner.classList.add(this.options.bannerHiddenClass),setTimeout(()=>this.banner.remove(),this.options.closingAnimationDuration))},CookieBanner.prototype.hasConsent=function(t){var o=CookieHelper.getCookie(this.options.cookieName);return void 0!==this.options.categories[t]&&(!0===this.options.categories[t].consent&&!0===this.options.categories[t].blocked||void 0!==o&&!0===o[t])},CookieBanner.prototype.getConsents=function(){return CookieHelper.getCookie(this.options.cookieName)},CookieBanner.prototype.showPopup=function(){this._draw_popup()};